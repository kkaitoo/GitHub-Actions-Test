name: Slack alert after Pytest

on: 
  workflow_run:
    workflows: ["pytest"]
    types: [completed]
  workflow_dispatch:

jobs:
  alert-workflow-run:
    name: Slack alert
    runs-on: ubuntu-latest
    steps:
      - uses: slackapi/slack-github-action@v1.22.0
        with: 
            channel-id: "C086RGJ9FH9"
            payload: |
              {
                "attachments": [
                  {
                    "color": "#f2c744",
                    "blocks": [
                      {
                        "type": "header",
                        "text": {
                          "type": "plain_text",
                          "text": "PytestÂÆüË°åÂÆå‰∫Ü",
                          "emoji": true
                        }
                      },
                      {
                        "type": "rich_text",
                        "elements": [
                          {
                            "type": "rich_text_section",
                            "elements": [
                              {
                                "type": "text",
                                "text": "src„Éá„Ç£„É¨„ÇØ„Éà„É™„Å´Â§âÊõ¥„Åå„ÅÇ„Å£„Åü„Åü„ÇÅPytest„ÇíÂÆüË°å„Åó„Åæ„Åó„Åü„ÄÇÁµêÊûú„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ üîé"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "rich_text",
                        "elements": [
                          {
                            "type": "rich_text_section",
                            "elements": [
                              {
                                "type": "emoji",
                                "name": "ghost"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
        env:
          SLACK_BOT_TOKEN: ${{ secrets.GITHUB_TOKEN }}