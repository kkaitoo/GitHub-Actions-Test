name: Slack alert after Pytest

on: 
  workflow_run:
    workflows: ["pytest"]
    types: [completed]
  workflow_dispatch:

jobs:
  alert-workflow-run:
    name: Slack alert
    runs-on: ubuntu-latest
    steps:
      - uses: slackapi/slack-github-action@v1.22.0
        with: 
            channel-id: "C086RGJ9FH9"
            payload: |
              {
                "attachments": [
                  {
                    "blocks": [
                      {
                        "type": "section",
                        "fields": [
                          {
                            "type": "plain_text",
                            "text": "*this is plain_text text*",
                            "emoji": true
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
        env:
          SLACK_BOT_TOKEN: ${{ secrets.GITHUB_TOKEN }}